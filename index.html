<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>My Portfolio</title>
    <!-- Favicon logo -->
    <link rel="shortcut icon" href="./assets/img/favicon.png" type="image/x-icon">

    <!-- Config file -->
    <link href="./index.css" rel="stylesheet">
    
    <!-- Library -->
    <script src="https://cdn.jsdelivr.net/npm/motion@10.16.2/dist/motion.js"></script>
  
  </head>
  <body>

    <div id="header-placeholder"></div>

    <!-- Home section -->
    <div class="home_section">
      <div class="music-waves">
      </div>

      <div class="hero_container">
        <div class="avatar_block">

          <img src="assets/img/me.PNG" class="hero_avatar" alt="Avatar" />
          <div class="hero_text">
            <span class="glitch-word" data-value="Hi, I'm Long">Hi, Im Long</span>
            <br>
            <span style="text-shadow: 2px 2px 0px rgb(243, 126, 58), 
            -2px -2px 0px rgb(255, 60, 0);padding-top: 10px; " 
            class="glitch-word line-indent " data-value="Developer">Developer</span>
          </div>
          <!-- <div class="hero_sub_text"><span class="font-weight: bold;"><i>Developer</i></span></div> -->

        </div>
        <div class="hero_info_column">
          <div class="sub_hero_text">
              <div class="toggle_header">
                <span class="sub_hero_title">GIỚI THIỆU</span>
                <div class="toggle_icon"></div>
              </div>
              <div class="toggle_content">
                <p>Xin chào mình tên là Huy Long, là 1 lập trình viên với hơn 2 năm kinh nghiệm trong
                   mảng Front-end web, mình tập trung vào việc xây dựng giao diện web tối ưu và thân 
                   thiện với người dùng. </p>
                <p class="mobile_desc">Với thế mạnh về reactjs, bên cạnh công việc chuyên môn, 
                   mình luôn chủ động phát triển bản thân thông qua các dự án cá nhân đa dạng, 
                   không ngừng cập nhật các công nghệ mới nhất để biến những ý tưởng sáng tạo 
                   thành hiện thực.</p>
              </div>
          </div>
          <div class="sub_hero_text desktop_desc">
              <div class="toggle_header">
                <span class="sub_hero_title">ƯU ĐIỂM</span>
                <div class="toggle_icon"></div>
              </div>
              <div class="toggle_content">
                <p>Với thế mạnh về reactjs, bên cạnh công việc chuyên môn, 
                   mình luôn chủ động phát triển bản thân thông qua các dự án cá nhân đa dạng, 
                   không ngừng cập nhật các công nghệ mới nhất để biến những ý tưởng sáng tạo 
                   thành hiện thực.</p>
              </div>
          </div>
        </div>
      </div>
      <div id="scroll-arrow-container">
        <img src="assets/img/downarrow.png" alt="Scroll Down" />
      </div>
    </div>
    <!-- End home section -->

    
    <!-- About section -->
    <div class="about_section">
      <img src="assets/img/bw_tea_bg.jpg" />
      <!-- <span class="about_span">WHO AM I?</span> -->
      <div class="about_content">
        <div class="about_topics">
          <span id="tab-about" class="active"><strong>Về bản thân</strong></span>
          <span id="tab-skills"><strong>Kỹ năng</strong></span>
        </div>
        <div id="about-text-content" class="about_text">
          Mình đã tốt nghiệp ngành công nghệ thông tin <br>
          Trường Đại học <b>công nghệ Sài Gòn</b> STU
          <b>2019 - 2024</b> <br> <br>
          Hiện tại đang sinh sống ở Sài Gòn, trải qua nhiều nơi, tiếp xúc nhiều môi trường công việc, mình <br> luôn học tập và làm việc theo nguyên tắc tôn 
          trọng đối phương, thấu hiểu đồng nghiệp và <br> đối tác. Mình luôn cầu tiến trong công việc,
          học hỏi những điều mới để đáp ứng nhanh, hy vọng <br> có thể hợp tác lâu dài để phát triển bản thân và doanh nghiệp. <br> <br>
          <b>Mục tiêu nghề nghiệp: </b> <br>
          Trong ngắn hạn có thêm kiến thức và kinh nghiệm, hoàn thành tốt các task được giao.<br>
          Trong dài hạn, phát triển bản thân tìm hiểu về lĩnh vực UX/UI designer và Front-end Developer. <br>
        </div>
      </div>

      <div id="skills-content" class="skills" style="display: none;">
        <div class="skills_list">
            <span class="skill-item">
              ReactJS
              <span class="skill-desc-hidden" style="display:none">Xây dựng giao diện người dùng hiện đại, tối ưu hiệu năng với ReactJS.</span>
            </span>
            <span class="skill-item">
              NextJS
              <span class="skill-desc-hidden" style="display:none">Phát triển ứng dụng web Full-stack, tối ưu SEO và Server-Side Rendering.</span>
            </span>
            <span class="skill-item">
              Figma
              <span class="skill-desc-hidden" style="display:none">Thiết kế UI/UX, tạo prototype và hệ thống design system.</span>
            </span>
            <span class="skill-item">
              illustrator
              <span class="skill-desc-hidden" style="display:none">Thiết kế đồ họa vector, logo và các ấn phẩm kỹ thuật số.</span>
            </span>
            <span class="skill-item">
              Wordpress
              <span class="skill-desc-hidden" style="display:none">Xây dựng và quản lý website content, tùy biến theme và plugin.</span>
            </span>
            <span class="skill-item">
              Webflow
              <span class="skill-desc-hidden" style="display:none">Phát triển website visual, animation mượt mà không cần code nhiều.</span>
            </span>
            <span class="skill-item">
              Framer
              <span class="skill-desc-hidden" style="display:none">Tạo các trang web tương tác cao, prototype như thật.</span>
            </span>
            <span class="skill-item">
              Java
              <span class="skill-desc-hidden" style="display:none">Lập trình hướng đối tượng, xử lý logic backend mạnh mẽ.</span>
            </span>
            <span class="skill-item">
              MySql
              <span class="skill-desc-hidden" style="display:none">Quản trị cơ sở dữ liệu quan hệ, tối ưu truy vấn dữ liệu.</span>
            </span>
        </div>
        <div class="skill-description">
            <p id="skill-text"></p>
        </div>
      </div>
    </div>

    <!-- Project section -->
    <div class="projects_section">
        <span class="project_title">My Projects</span>
        
        <div class="projects_container">
            <div class="project project1">
                <span>01</span>
                <img src="assets/img/1.jpg" />
            </div>
            <div class="sub_container">
                <div class="project project2">
                    <span>02</span>
                    <img src="assets/img/2.jpg" />
                </div>
                <div class="project project3">
                    <span>03</span>
                    <img src="assets/img/3.jpg" />
                </div>
                <div class="project project4">
                    <span>04</span>
                    <img src="assets/img/4.jpg" />
                </div>
                <div class="project project5">
                    <span>05</span>
                    <img src="assets/img/5.jpg" />
                </div>
            </div>
        </div>

    </div>
    <!-- End project section -->


    <!-- Contact section -->
    <div class="contact_section">
        <div class="contact_card card-1">
            <img src="assets/img/mechagirl.jpg" alt="Art" />
            <span>Linked In.</span>
        </div>
        <div class="contact_card card-2">
            <img src="assets/img/art2.jpg" alt="Art" />
            <span>Facebook.</span>
        </div>
            <div class="contact_card card_center">
            <img src="assets/img/art6.jpg" alt="Art" />
            <span>Contact me <br> My info</span>
        </div>
        <div class="contact_card card-3">
            <img src="assets/img/art3.jpg" alt="Art" />
            <span>Instagram.</span>
        </div>
        <div class="contact_card card-4">
            <img src="assets/img/art4.jpg" alt="Art" />
            <span>GitHub.</span>
        </div>

    </div>
    <!-- End contact section  -->


    <!-- Footer section --> 
    <div id="footer-placeholder"></div>
    <!-- End footer section -->


    <script>
      // Gọi hàm tải component
      loadComponent('header-placeholder', 'header.html');
      loadComponent('footer-placeholder', 'footer.html');
      
      // Hàm tải component (header/footer)
      function loadComponent(id, file) {
        fetch(file)
          .then(response => response.text())
          .then(data => {
            document.getElementById(id).innerHTML = data;
            
            // Nếu là header thì kích hoạt lại sự kiện cho nút theme
            if (id === 'header-placeholder') {
                const themeBtn = document.getElementById('theme-toggle');
                if(themeBtn) {
                    themeBtn.addEventListener('click', () => {
                        document.body.classList.toggle('light-mode');
                    });
                }

                // --- Thêm logic cho Hamburger Menu ---
                const navContainer = document.querySelector('.nav_container');
                if (navContainer) {
                    // Tạo nút hamburger
                    const hamburger = document.createElement('div');
                    hamburger.className = 'hamburger';
                    hamburger.innerHTML = '<span></span><span></span><span></span>';
                    
                    // Thêm vào nav_container
                    navContainer.appendChild(hamburger);

                    // Xử lý sự kiện click
                    hamburger.addEventListener('click', function() {
                        this.classList.toggle('active'); // Animation icon
                        navContainer.classList.toggle('active'); // Mở/đóng menu
                    });
                }
                // -------------------------------------

                // Xử lý active state cho nav items
                const navItems = document.querySelectorAll('.nav_item');
                navItems.forEach(item => {
                    item.addEventListener('click', function() {
                        // Bỏ active của tất cả các item khác
                        navItems.forEach(nav => nav.classList.remove('active'));
                        // Thêm active cho item vừa bấm
                        this.classList.add('active');
                    });
                });

                // Xử lý scroll cho các mục nav
                const navAbout = document.getElementById('nav-about');
                const navProject = document.getElementById('nav-project');
                const navHome = document.getElementById('nav-home');
                const navContact = document.getElementById('nav-contact');


                if (navAbout) {
                    navAbout.addEventListener('click', () => document.querySelector('.about_section').scrollIntoView({ behavior: 'smooth' }));
                }
                
                if (navProject) {
                    navProject.addEventListener('click', () => document.querySelector('.projects_section').scrollIntoView({ behavior: 'smooth' }));
                }
                
                if (navHome) {
                    navHome.addEventListener('click', () => document.querySelector('.home_section').scrollIntoView({ behavior: 'smooth' }));
                }

                if (navContact) {
                    navContact.addEventListener('click', () => document.querySelector('.contact_section').scrollIntoView({ behavior: 'smooth' }));
                }                
            }
          })
          .catch(error => console.error('Error loading component:', error));
      }


      // --- Logic cho Tab About/Skills ---
      const tabAbout = document.getElementById('tab-about');
      const tabSkills = document.getElementById('tab-skills');
      const contentAbout = document.getElementById('about-text-content');
      const contentSkills = document.getElementById('skills-content');
      if (tabAbout && tabSkills && contentAbout && contentSkills) {
        tabAbout.addEventListener('click', () => {
            tabAbout.classList.add('active');
            tabSkills.classList.remove('active');
            contentAbout.style.display = 'block';
            contentSkills.style.display = 'none';
        });
        tabSkills.addEventListener('click', () => {
            tabSkills.classList.add('active');
            tabAbout.classList.remove('active');
            contentAbout.style.display = 'none';
            contentSkills.style.display = 'flex';
        });
      }

      // --- Logic cho Skill Items (Hover/Click) ---
      const skillItems = document.querySelectorAll('.skill-item');
      const skillText = document.getElementById('skill-text');

      if (skillItems.length > 0 && skillText) {
        const setActiveSkill = (index) => {
            skillItems.forEach(item => item.classList.remove('active'));
            skillItems[index].classList.add('active');
            const desc = skillItems[index].querySelector('.skill-desc-hidden').innerText;
            skillText.innerText = desc;
        };

        skillItems.forEach((item, index) => {
            item.addEventListener('click', () => setActiveSkill(index));
        });

        // Mặc định active cái đầu tiên
        setActiveSkill(0);
      }
      
      // Tạo hiệu ứng kẻ sọc (Rising Stripes) bằng JS
      const wavesContainer = document.querySelector('.music-waves');
      if (wavesContainer) {
        const stripeCount = 40; // Tăng số lượng sọc lên 40
        const colors = ['#ff0000', '#ff7f00', '#ffff00', '#00ff00', '#0000ff', '#4b0082', '#9400d3'];

        for (let i = 0; i < stripeCount; i++) {
          const span = document.createElement('span');
          
          // Random các thuộc tính
          const left = Math.random() * 100; // Vị trí ngẫu nhiên 0-100%
          const height = Math.random() * 20 + 10; // Giảm chiều dài: random từ 10vh đến 30vh
          const duration = Math.random() * 3 + 2; // Tốc độ ngẫu nhiên (2s - 5s)
          const delay = Math.random() * 5; // Độ trễ
          const color = colors[Math.floor(Math.random() * colors.length)]; // Màu ngẫu nhiên

          // Gán style inline
          span.style.left = `${left}%`;
          span.style.height = `${height}vh`;
          span.style.animationDuration = `${duration}s`;
          span.style.animationDelay = `${delay}s`;
          span.style.background = `linear-gradient(to top, transparent, ${color}, transparent)`;

          wavesContainer.appendChild(span);
        }
      }


      // Effect font
      // Map ký tự sang số theo yêu cầu
      const charMap = {
        'e': '3', 'E': '3',
        'o': '0', 'O': '0',
        'y': '2', 'Y': '2',
        'i': '1', 'I': '1'
      };
      const targetLetters = Object.keys(charMap);

      // Hàm chạy hiệu ứng cho 1 đối tượng cụ thể
      const runHackerEffect = (element, mode = 'decode') => {
        let iteration = 0;
        const originalText = element.dataset.value; // Lấy chữ gốc từ data-value
        
        // Dừng interval cũ nếu đang chạy (để tránh lỗi khi rê chuột nhanh)
        if (element.interval) clearInterval(element.interval);
        
        element.interval = setInterval(() => {
          element.innerText = originalText
            .split("")
            .map((letter, index) => {
              // Nếu ký tự không nằm trong danh sách targetLetters thì giữ nguyên
              if (!targetLetters.includes(letter)) {
                return letter;
              }

              const hackedChar = charMap[letter];

              if (mode === 'encode') {
                 // Hover vào: Chữ -> Số (từ trái sang phải)
                 if (index < iteration) return hackedChar;
                 return letter;
              } else {
                 // Hover ra (hoặc load): Số -> Chữ (từ trái sang phải)
                 if (index < iteration) return letter;
                 return hackedChar;
              }
            })
            .join("");
          
          if(iteration >= originalText.length){ 
            clearInterval(element.interval);
          }
          
          iteration += 1 / 3;
        }, 30);
      }

      // Lấy danh sách các từ cần đổi hiệu ứng
      const words = document.querySelectorAll(".glitch-word");

      // 1. Chạy ngay khi load trang (Hiệu ứng giải mã: Số -> Chữ)
      words.forEach(word => runHackerEffect(word, 'decode'));

      // 2. Chạy lại khi di chuột vào cả khối cha
      const container = document.querySelector(".hero_text");
      if (container) {
        container.onmouseenter = () => {
            words.forEach(word => {
                runHackerEffect(word, 'encode');
            });
        };
        container.onmouseleave = () => {
            words.forEach(word => {
                runHackerEffect(word, 'decode');
            });
        };
      }


      // --- Hiệu ứng scroll slide Animation Home Section ---
      const homeSection = document.querySelector('.home_section');
      const animatedElements = document.querySelectorAll('.hero_avatar, .hero_text, .hero_sub_text, .sub_hero_text');

      if (homeSection && animatedElements.length > 0) {
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {  
                if (entry.isIntersecting) {
                    // Khi home section xuất hiện -> Thêm class để chạy animation
                    animatedElements.forEach(el => el.classList.add('animate-active'));
                } else {
                    // Khi home section biến mất -> Xóa class để reset animation
                    animatedElements.forEach(el => el.classList.remove('animate-active'));
                }
            });
        }, {
            threshold: 0.1 // Kích hoạt khi thấy 10% home section
        });

        observer.observe(homeSection);
      }


      // --- Scroll Arrow Logic ---
      const scrollArrowContainer = document.getElementById('scroll-arrow-container');
      const footerPlaceholder = document.getElementById('footer-placeholder');
      const sections = document.querySelectorAll('.home_section, .about_section, .projects_section, .contact_section');
      let currentSectionIndex = 0;

      if (scrollArrowContainer && sections.length > 0 && footerPlaceholder) {
        // Observer để theo dõi section nào đang hiển thị trên màn hình
        const sectionObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    // Tìm index của section đang hiển thị
                    const intersectingIndex = Array.from(sections).findIndex(sec => sec === entry.target);
                    if (intersectingIndex > -1) {
                        currentSectionIndex = intersectingIndex;
                    }
                }
            });
        }, { threshold: 0.5 }); // Kích hoạt khi 50% section hiện ra

        sections.forEach(section => sectionObserver.observe(section));

        // 1. Click event
        scrollArrowContainer.addEventListener('click', () => {
            if (scrollArrowContainer.classList.contains('scrolled-to-bottom')) {
                // Nếu ở cuối, cuộn lên đầu
                sections[0].scrollIntoView({ behavior: 'smooth' });
            } else {
                // Cuộn xuống section tiếp theo
                const nextSectionIndex = currentSectionIndex + 1;
                if (nextSectionIndex < sections.length) {
                    sections[nextSectionIndex].scrollIntoView({ behavior: 'smooth' });
                } else {
                    // Nếu đã ở section cuối, cuộn tới footer
                    footerPlaceholder.scrollIntoView({ behavior: 'smooth' });
                }
            }
        });

        // 2. Observer để phát hiện khi tới footer
        const footerObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                scrollArrowContainer.classList.toggle('scrolled-to-bottom', entry.isIntersecting);
            });
        }, { threshold: 0.1 });

        footerObserver.observe(footerPlaceholder);
      }
    </script>
  </body>
</html>
